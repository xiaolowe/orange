<?xml version="1.0" encoding="GBK"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- create by autoCode,v1.0.0 --><mapper namespace="race.info">	<select id="race.info.selectPageList" parameterType="com.orange.race.entity.RaceInfoEntity"		resultType="hashMap">		select t.id, t.name, t.time, t.address, t.descs, t.ads, t.status, t.price, t.isChild, 		t.isLimit, t.limitNum, t.isTeam, t.minNum, t.maxNum, t.isStop,t.startTime,t.endTime,		<!-- (select count(a.id) from t_race_addon as a where a.raceId=t.id) as num, -->		 <![CDATA[IF(t.isTeam,			(SELECT COUNT(tm.id) FROM t_race_team tm, t_race_addon a WHERE a.raceId=t.id AND a.teamId=tm.id and a.status=1)			,(SELECT COUNT(m.id) FROM t_race_addon_man m, t_race_addon a WHERE a.raceId=t.id AND a.teamId=m.teamId and a.status=1)			) AS num,]]> 		 <![CDATA[IF((NOW() > t.time),'1','0') AS isFinish,]]>  		 <![CDATA[IF((NOW() > t.startTime),'1','0') AS isStart,]]>  		 <![CDATA[IF((t.startTime <= NOW() && NOW() <= t.endTime),'1','0') AS isGoing,]]>  		 <![CDATA[IF((NOW() > t.endTime),'1','0') AS isEnd]]>  		from t_race_info t where 1=1		<if test="name!=null and name!=''">			and t.name like CONCAT('%','${name}','%' )		</if>		<if test="status!=null and status!=''">			and t.status=#{status}		</if>		<if test="type!=null and (type=='1'.toString())">			 <![CDATA[			 	and t.time <=now()			 ]]>		</if>		<if test="type!=null and (type=='0'.toString())">			 <![CDATA[			 	and t.time > now()			 ]]>		</if>		<if test="isStop!=null and isStop!=''">			and t.isStop=#{isStop}		</if>				order by t.time, t.orders		limit #{offset},#{pageSize}	</select>		<select id="race.info.selectPageCount" parameterType="com.orange.race.entity.RaceInfoEntity"		resultType="java.lang.Integer">		select count(*) from t_race_info t where 1=1		<if test="name!=null and name!=''">			and t.name like CONCAT('%','${name}','%' )		</if>		<if test="status!=null and status!=''">			and t.status=#{status}		</if>		<if test="type!=null and (type=='1'.toString())">			 <![CDATA[			 	and t.time <=now()			 ]]>		</if>		<if test="type!=null and (type=='0'.toString())">			 <![CDATA[			 	and t.time > now()			 ]]>		</if>		<if test="isStop!=null and isStop!=''">			and t.isStop=#{isStop}		</if>	</select>		<select id="race.info.front.selectPageList" parameterType="com.orange.race.entity.RaceInfoEntity"		resultType="hashMap">		select t.*,		<!-- (select count(a.id) from t_race_addon as a where a.raceId=t.id) as num, -->		 <![CDATA[IF(t.isTeam,			(SELECT COUNT(tm.id) FROM t_race_team tm, t_race_addon a WHERE a.raceId=t.id AND a.teamId=tm.id and a.status=1)			,(SELECT COUNT(m.id) FROM t_race_addon_man m, t_race_addon a WHERE a.raceId=t.id AND a.teamId=m.teamId and a.status=1)			) AS num,]]> 		 <![CDATA[IF((NOW() > t.startTime),'1','0') AS isStart,]]>  		 <![CDATA[IF((t.startTime <= NOW() && NOW() <= t.endTime),'1','0') AS isGoing,]]>  		 <![CDATA[IF((NOW() > t.endTime),'1','0') AS isEnd]]> 		from t_race_info t where 1=1		<if test="id!=null and id!=''">			and id=#{id}		</if>		limit 0, 1	</select>		<select id="race.info.front.selectPageCount" parameterType="com.orange.race.entity.RaceInfoEntity"		resultType="java.lang.Integer">		select count(*) from t_race_info t where 1=1		<if test="id!=null and id!=''">			and id=#{id}		</if>	</select>	<select id="race.info.selectTotalCount" parameterType="hashMap"		resultType="java.lang.Integer">		select count(*) from t_race_info t	</select>	<insert id="race.info.insert" parameterType="com.orange.race.entity.RaceInfoEntity"		useGeneratedKeys="true" keyProperty="id">		insert into t_race_info		(		id,createTime		<if test="name!=null and name!=''">			,name		</if>		<if test="time!=null and time!=''">			,time		</if>		<if test="address!=null and address!=''">			,address		</if>		<if test="slt!=null and slt!=''">			,slt		</if>		<if test="banner!=null and banner!=''">			,banner		</if>		<if test="ads!=null and ads!=''">			,ads		</if>		<if test="descs!=null and descs!=''">			,descs		</if>		<if test="startTime!=null and startTime!=''">			,startTime		</if>		<if test="endTime!=null and endTime!=''">			,endTime		</if>		<if test="isChild!=null and isChild!=''">			,isChild		</if>		<if test="detail!=null and detail!=''">			,detail		</if>		<if test="introduce!=null and introduce!=''">			,introduce		</if>		<if test="frees!=null and frees!=''">			,frees		</if>		<if test="tips!=null and tips!=''">			,tips		</if>		<if test="contact!=null and contact!=''">			,contact		</if>		<if test="createTime!=null and createTime!=''">			,createTime		</if>		<if test="status!=null and status!=''">			,status		</if>		<if test="orders!=null and orders!=''">			,orders		</if>		<if test="isStop!=null and isStop!=''">			,isStop		</if>		) values(		id,now()		<if test="name!=null and name!=''">			,#{name}		</if>		<if test="time!=null and time!=''">			,#{time}		</if>		<if test="address!=null and address!=''">			,#{address}		</if>		<if test="slt!=null and slt!=''">			,#{slt}		</if>		<if test="banner!=null and banner!=''">			,#{banner}		</if>		<if test="ads!=null and ads!=''">			,#{ads}		</if>		<if test="descs!=null and descs!=''">			,#{descs}		</if>		<if test="startTime!=null and startTime!=''">			,#{startTime}		</if>		<if test="endTime!=null and endTime!=''">			,#{endTime}		</if>		<if test="isChild!=null and isChild!=''">			,#{isChild}		</if>		<if test="detail!=null and detail!=''">			,#{detail}		</if>		<if test="introduce!=null and introduce!=''">			,#{introduce}		</if>		<if test="frees!=null and frees!=''">			,#{frees}		</if>		<if test="tips!=null and tips!=''">			,#{tips}		</if>		<if test="contact!=null and contact!=''">			,#{contact}		</if>		<if test="createTime!=null and createTime!=''">			,#{createTime}		</if>		<if test="status!=null and status!=''">			,#{status}		</if>		<if test="orders!=null and orders!=''">			,#{orders}		</if>		<if test="isStop!=null and isStop!=''">			,#{isStop}		</if>		)	</insert>	<update id="race.info.update" parameterType="com.orange.race.entity.RaceInfoEntity">		update t_race_info		set id=#{id}, updateTime=now()		<if test="name!=null and name!=''">			,name=#{name}		</if>		<if test="time!=null and time!=''">			,time=#{time}		</if>		<if test="address!=null and address!=''">			,address=#{address}		</if>		<if test="slt!=null and slt!=''">			,slt=#{slt}		</if>		<if test="banner!=null and banner!=''">			,banner=#{banner}		</if>		<if test="ads!=null and ads!=''">			,ads=#{ads}		</if>		<if test="descs!=null and descs!=''">			,descs=#{descs}		</if>		<if test="startTime!=null and startTime!=''">			,startTime=#{startTime}		</if>		<if test="endTime!=null and endTime!=''">			,endTime=#{endTime}		</if>		<if test="price!=null and price!=''">			,price=#{price}		</if>		<if test="isMan!=null and isMan!=''">			,isMan=#{isMan}		</if>		<if test="isChild!=null and isChild!=''">			,isChild=#{isChild}		</if>		<if test="isLimit!=null and isLimit!=''">			,isLimit=#{isLimit}		</if>			,limitNum=#{limitNum}		<if test="detail!=null and detail!=''">			,detail=#{detail}		</if>		<if test="introduce!=null and introduce!=''">			,introduce=#{introduce}		</if>		<if test="frees!=null and frees!=''">			,frees=#{frees}		</if>		<if test="tips!=null and tips!=''">			,tips=#{tips}		</if>		<if test="contact!=null and contact!=''">			,contact=#{contact}		</if>		<if test="status!=null and status!=''">			,status=#{status}		</if>		<if test="orders!=null and orders!=''">			,orders=#{orders}		</if>		<if test="isStop!=null and isStop!=''">			,isStop=#{isStop}		</if>		<if test="isTeam!=null and isTeam!=''">			,isTeam=#{isTeam}		</if>			,minNum=#{minNum}			,maxNum=#{maxNum}		where 1=1 and id=#{id}	</update>	<select id="race.info.top3.selectList" parameterType="com.orange.race.entity.RaceInfoEntity"		resultType="com.orange.race.entity.RaceInfoEntity">		select t.*		from t_race_info t 		where 1=1		<if test="status!=null and status!=''">			and t.status=#{status}		</if>		and t.time > now()		order by t.time		limit 0,3	</select>		<select id="race.info.selectList" parameterType="com.orange.race.entity.RaceInfoEntity"		resultType="com.orange.race.entity.RaceInfoEntity">		select t.*		from t_race_info t where 1=1		<if test="name!=null and name!=''">			and t.name like CONCAT('%','${name}','%' )		</if>		<if test="status!=null and status!=''">			and t.status=#{status}		</if>		order by orders	</select>		<select id="race.info.selectOne" parameterType="com.orange.race.entity.RaceInfoEntity"		resultType="com.orange.race.entity.RaceInfoEntity">		select  t.id, t.name, t.time, t.address, t.descs, t.ads, t.status, t.price, t.isChild, 		 <![CDATA[IF(t.isTeam,			(SELECT COUNT(tm.id) FROM t_race_team tm, t_race_addon a WHERE a.raceId=t.id AND a.teamId=tm.id)			,(SELECT COUNT(m.id) FROM t_race_addon_man m, t_race_addon a WHERE a.raceId=t.id AND a.teamId=m.teamId)			) AS num,]]> 		t.isLimit, t.limitNum, t.isTeam, t.minNum, t.maxNum, t.isStop,t.startTime,t.endTime		from t_race_info t where 1=1		<if test="id!=null and id!=''">			and id=#{id}		</if>	</select>		<select id="race.info.selectById" parameterType="string"		resultType="com.orange.race.entity.RaceInfoEntity">		select t.*		from t_race_info t where 1=1 and id=#{id}	</select>	<delete id="race.info.deleteById" parameterType="com.orange.race.entity.RaceInfoEntity">		delete from		t_race_info where 1=1 and id=#{id}	</delete></mapper>
<?xml version="1.0" encoding="GBK"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- create by autoCode,v1.0.0 --><mapper namespace="race.addon">	<!-- <sql id="t_race_addon_column">		 t.id, t.link, t.name, t.code, t.img, t.email, t.qq, t.wx, t.qqId, t.wxId, t.qqNick, t.wxNick, t.avator,		 t.status, t.expertIds, t.shoperIds, t.createTime, t.updateTime, t.lat, t.lng, province, t.city, t.district, t.addr,		 t.roleCode, t.domains, t.elink, t.slink, t.type, t.profile, t.gender	</sql>-->	<select id="race.addon.selectPageList" parameterType="com.orange.race.entity.RaceAddonEntity"		resultType="hashMap">		select t.id, t.mId, t.raceId, t.createTime, t.teamId, t.status, t.cashTime,		<![CDATA[IF(t.tradeNo='',now(),t.tradeNo)AS tradeNo,]]> 		r.name AS rName, rg.price AS rPrice, r.address, r.time, 		rt.isTeam, rt.name as tName, rt.mobile,rt.contact as contactor,		(SELECT COUNT(m.id) FROM t_race_addon_man m WHERE m.teamId=t.teamId) AS num,		rg.type as gType,		rg.name as gName		FROM t_race_addon t, t_race_info r, t_race_team rt, t_race_group rg 		where 1=1		AND rt.id=t.teamId		AND t.raceId = r.id		AND t.groupId = rg.id		<if test="id!=null and id!=''">			and t.id=#{id}		</if>		<if test="mId!=null and mId!=''">			and t.mId=#{mId}		</if>		<if test="raceId!=null and raceId!=''">			and t.raceId=#{raceId}		</if>		<if test="teamId!=null and teamId!=''">			and t.teamId=#{teamId}		</if>		<if test="status!=null and status!=''">			and t.status=#{status}		</if>		<if test="tradeNo!=null and tradeNo!=''">			and tradeNo=#{tradeNo}		</if>		order by t.status, t.createTime desc		limit #{offset},#{pageSize}	</select>	<select id="race.addon.selectPageCount" parameterType="com.orange.race.entity.RaceAddonEntity"		resultType="java.lang.Integer">		select count(*) from t_race_addon t where 1=1		<if test="id!=null and id!=''">			and t.id=#{id}		</if>		<if test="mId!=null and mId!=''">			and t.mId=#{mId}		</if>		<if test="raceId!=null and raceId!=''">			and t.raceId=#{raceId}		</if>		<if test="teamId!=null and teamId!=''">			and t.teamId=#{teamId}		</if>		<if test="status!=null and status!=''">			and t.status=#{status}		</if>		<if test="tradeNo!=null and tradeNo!=''">			and tradeNo=#{tradeNo}		</if>	</select>		<select id="race.addon.selectAddonList" parameterType="com.orange.race.entity.RaceAddonEntity"        resultType="hashMap">        select t.id, t.mId, t.raceId, t.createTime, t.teamId, t.status, t.cashTime,        <![CDATA[IF(t.tradeNo='',now(),t.tradeNo)AS tradeNo,]]>         r.name AS rName, rg.price AS rPrice, r.address, r.time,         rt.isTeam, rt.name as tName, rt.mobile,rt.contact as contactor,        (SELECT COUNT(m.id) FROM t_race_addon_man m WHERE m.teamId=t.teamId) AS num,        rg.type as gType,        rg.name as gName        FROM t_race_addon t, t_race_info r, t_race_team rt, t_race_group rg         where 1=1        AND rt.id=t.teamId        AND t.raceId = r.id        AND t.groupId = rg.id        <if test="id!=null and id!=''">            and t.id=#{id}        </if>        <if test="mId!=null and mId!=''">            and t.mId=#{mId}        </if>        <if test="raceId!=null and raceId!=''">            and t.raceId=#{raceId}        </if>        <if test="teamId!=null and teamId!=''">            and t.teamId=#{teamId}        </if>        <if test="status!=null and status!=''">            and t.status=#{status}        </if>        <if test="tradeNo!=null and tradeNo!=''">            and tradeNo=#{tradeNo}        </if>        order by t.status, t.createTime desc    </select>	<insert id="race.addon.insert" parameterType="com.orange.race.entity.RaceAddonEntity"		useGeneratedKeys="true" keyProperty="id">		insert into t_race_addon		(		id, createTime		<if test="mId!=null and mId!=''">			,mId		</if>		<if test="raceId!=null and raceId!=''">			,raceId		</if>		<if test="teamId!=null and teamId!=''">			,teamId		</if>		<if test="status!=null and status!=''">			,status		</if>		<if test="tradeNo!=null and tradeNo!=''">			,tradeNo		</if>		<if test="groupId!=null and groupId!=''">            ,groupId        </if>		) values(		id, now()		<if test="mId!=null and mId!=''">			,#{mId}		</if>		<if test="raceId!=null and raceId!=''">			,#{raceId}		</if>		<if test="teamId!=null and teamId!=''">			,#{teamId}		</if>		<if test="status!=null and status!=''">			,#{status}		</if>		<if test="tradeNo!=null and tradeNo!=''">			,#{tradeNo}		</if>		<if test="groupId!=null and groupId!=''">            ,#{groupId}        </if>		)	</insert>	<update id="race.addon.update" parameterType="com.orange.race.entity.RaceAddonEntity">		update t_race_addon		set id=#{id}		<if test="mId!=null and mId!=''">			,mId=#{mId}		</if>		<if test="raceId!=null and raceId!=''">			,raceId=#{raceId}		</if>		<if test="teamId!=null and teamId!=''">			,teamId=#{teamId}		</if>		<if test="status!=null and status!=''">			,status=#{status}		</if>		<if test="tradeNo!=null and tradeNo!=''">			,tradeNo=#{tradeNo}		</if>		<if test="cashTime!=null and cashTime!=''">			,cashTime=#{cashTime}		</if>		where 1=1 and id=#{id}	</update>		<update id="race.addon.update.cash" parameterType="com.orange.race.entity.RaceAddonEntity">		update t_race_addon		set id=#{id}, cashTime=now()		<if test="status!=null and status!=''">			,status=#{status}		</if>		<if test="tradeNo!=null and tradeNo!=''">			,tradeNo=#{tradeNo}		</if>		where 1=1 and id=#{id}	</update>		<update id="race.addon.update.cancel" parameterType="com.orange.race.entity.RaceAddonEntity">		update t_race_addon t		set t.status=2		where 1=1		and t.status=0		<![CDATA[and t.createTime < (SELECT DATE_SUB(NOW(), INTERVAL 1 HOUR) AS pre_time)]]> 	</update>	<select id="race.addon.selectList" parameterType="com.orange.race.entity.RaceAddonEntity"		resultType="com.orange.race.entity.RaceAddonEntity">		select t.*		from t_race_addon t 		where 1=1		<if test="mId!=null and mId!=''">			and mId=#{mId}		</if>		<if test="raceId!=null and raceId!=''">			and raceId=#{raceId}		</if>		<if test="teamId!=null and teamId!=''">			and teamId=#{teamId}		</if>		<if test="tradeNo!=null and tradeNo!=''">			and tradeNo=#{tradeNo}		</if>	</select>	<select id="race.addon.selectOne" parameterType="com.orange.race.entity.RaceAddonEntity"		resultType="com.orange.race.entity.RaceAddonEntity">		select t.*		from t_race_addon t		where 1=1		<if test="id!=null and id!=''">			and id=#{id}		</if>		<if test="mId!=null and mId!=''">			and mId=#{mId}		</if>		<if test="raceId!=null and raceId!=''">			and raceId=#{raceId}		</if>		<if test="teamId!=null and teamId!=''">			and teamId=#{teamId}		</if>		<if test="tradeNo!=null and tradeNo!=''">			and tradeNo=#{tradeNo}		</if>	</select>	<select id="race.addon.selectById" parameterType="string"		resultType="com.orange.race.entity.RaceAddonEntity">		select t.*		from t_race_addon t		where 1=1		<if test="id!=null and id!=''">			and id=#{id}		</if>		<if test="mId!=null and mId!=''">			and mId=#{mId}		</if>		<if test="raceId!=null and raceId!=''">			and raceId=#{raceId}		</if>		<if test="teamId!=null and teamId!=''">			and teamId=#{teamId}		</if>		<if test="tradeNo!=null and tradeNo!=''">			and tradeNo=#{tradeNo}		</if>	</select>	<delete id="race.addon.deleteById" parameterType="com.orange.race.entity.RaceAddonEntity">		delete from		t_race_addon where 1=1 and id=#{id}	</delete>		<select id="race.addon.selectRaceGroupAddonCount" parameterType="com.orange.race.entity.RaceAddonEntity"        resultType="java.lang.Integer">        select count(*)        from t_race_addon where 1=1        <if test="raceId!=null and raceId!=''">            and raceId=#{raceId}        </if>        <if test="groupId!=null and groupId!=''">            and groupId=#{groupId}        </if>    </select></mapper>